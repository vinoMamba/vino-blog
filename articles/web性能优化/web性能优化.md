# web 性能优化

## DNS 与 host

> 提供一个域名，域名系统返回一个具体的 IP

1. 浏览器输入一个域名之后，首先会检查一下**浏览器**本身是否有缓存，有的话就直接使用。
2. 如果没有，则去询问**操作系统**(具体是系统中的 hosts 的文件)
3. 还是没有的话就去询问 **ISP**(联通，移动，电信等服务商),这些服务商一定会有对应的 IP

## 三次握手

> 浏览器查到 IP 之后就开始建立 TCP 连接

| 浏览器 |        传输         | 服务器 |
| :----: | :-----------------: | :----: |
|   A    |     SYN(x) -->      |   B    |
|   A    | <-- ACK(x+1) SYN(y) |   B    |
|   A    |    ACK(y+1) -->     |   B    |
|   A    |    HTTP 内容 -->    |   B    |

- SYN: synchronize 同步信息

- ACK: acknowledge 获悉信息

- x 和 y 一般都是从 0 开始，作为标志位

> 为什么需要第三次握手
>
> 目的是为了保证 A 和 B 双方都知道对方都能通，第一次握手是向 B 发送信息，第二次握手 B 回复 ACK(x+1)代表 B 能接收 A 发送过来的信息，并且 B 此时向 A 也发送了一条信息 SYN(y)。第三次握手 A 向 B 回复 ACK(y+1),代表 A 能够接收 B 发送过来的信息

三次握手之后代表建立了 TCP 连接

## 四次挥手

| 浏览器 |     传输     | 服务器 |
| :----: | :----------: | :----: |
|   A    |  FIN(x) -->  |   B    |
|   A    | <-- FIN(x+1) |   B    |
|   A    |  <-- FIN(y)  |   B    |
|   A    | FIN(y+1) --> |   B    |

- 关闭的时候 x 和 y 一般都不是 0 开始
- 中间两次挥手分开是因为在这中间 B 还可以发送其他的信息给 A
- 也可以是 B 先发 FIN，不一定都是 A 先发送

## HTTP 的请求与响应

